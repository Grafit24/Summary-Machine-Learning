#CV #metric #segmentation 
## Pixel Accuracy (PA)
$\text{PA}$ это метрика использующаяся в задачах [[Semantic Segmentation]] и она определяет процент правильно классифицированных пикселей на изображение.
Считается он, как число правильно предсказанных пикселей делённое на общее число пикселей.
Пусть $K$ это кол-во классов, а $p_{ij}$ это кол-во пикселей класса $i$ предсказанных, как класс $j$, тогда:
$$\text{PA}=\frac{\sum^K_{i=0}{p_{ii}}}{\sum_{i=0}^K\sum^{K}_{i=0}{p_{ij}}}$$

## Mean Pixel Accuracy (mPA)
Это метрика, которая усредняет PA по всем классам. Считается она как среднее точности предсказанний по каждому классу.
Пусть $K$ это кол-во классов, а $p_{ij}$ это кол-во пикселей класса $i$ предсказанных, как класс $j$, тогда:
$$\text{mPA}=\frac{1}{K+1}\sum^K_{i=0}\frac{p_{ii}}{\sum^K_{j=0}p_{ij}}$$
Примечание: В данном случае фон тоже рассматривается и поэтому чтобы проверить что и ему не соответсвует лишних пикселей мы делим на $K+1$.

## Проблема mPA и PA
Даже при условии их интуитивной понятности они плохо подходят для inbalanced class datasets, потому что чем больше пикселей захватывает класс на изображение тем выше его вклад в метрику.

То есть в такой ситуации чёрный квадрат даст $\text{PA}=0.95$:
![[Pasted image 20230211204637.png]]